package pbnavitia;

enum NavitiaType {
    STOPAREA = 5;
    CITY = 10;
    COUNTRY = 17;
    WAY = 19;
    SITE = 20;
}


enum API {
    FIRSTLETTER = 1;
    PTREFERENTIAL = 2;
    STREET_NETWORK = 3;
    PLANNER = 4;	
    LOAD = 5;
    PROXIMITYLIST = 6;
}

message GeographicalCoord {
    required double x = 1;
    required double y = 2;
}

message Country {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name  = 3;
    optional PTReferential child = 4; 
    optional GeographicalCoord coord = 6;
}

message StopArea {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name = 3;
    optional string external_code = 4;
    optional GeographicalCoord coord = 5;
    optional PTReferential child = 6; 
}

message StopPoint {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name = 3;
    optional string external_code = 4;
    optional GeographicalCoord coord = 5; 
    optional PTReferential child = 6; 
}

message Line {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name = 3;
    optional string external_code = 4;
    optional string code = 5;
    optional string forward_name = 6;
    optional string backward_name = 7;
    optional string additional_data = 8;
    optional string color = 9;
    optional PTReferential child = 10; 
}

message Route {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name = 3;
    optional string external_code = 4;
    optional bool is_frequence = 5;
    optional bool is_adapted = 6;
    optional PTReferential child = 7; 
}

message StopTime {
    optional int32 arrival_time = 1;
    optional int32 departure_time = 2;
    optional int32 vehicle_journey_idx = 3;
}

message VehicleJourney {
    optional string id = 1;
    optional int32 idx = 2;
    optional string name = 3;
    optional string external_code = 4;
    optional bool is_adapted = 5;
    optional PTReferential child = 6; 
}

message RoutePoint{
    optional string id = 1;
    optional int32 idx = 2;
    optional string external_code = 3;
    optional int32 order = 4;

    optional PTReferential child = 5; 
}

message Way {
    optional string id = 1;
    optional int32 idx = 2;
    optional string external_code = 3;
    optional string name = 4;
    optional PTReferential child = 5; 
    optional GeographicalCoord coord = 6;
}

message City {
    optional string id = 1;
    optional int32 idx = 2;
    optional string external_code = 3;
    optional string name = 4;
    optional PTReferential child = 5; 
    optional GeographicalCoord coord = 6;
}

message Site {
    optional string id = 1;
    optional int32 idx = 2;
    optional string external_code = 3;
    optional string name = 4;
    optional PTReferential child = 5; 
    optional GeographicalCoord coord = 6;
}

message Node {
    optional string id = 1;
    optional int32 idx = 2;
    optional GeographicalCoord coord = 6;
}
    
message Segment {
    optional string id = 1;
    optional int32 idx = 2;
    optional Node start = 3;
    optional Node end = 4;
    optional float length = 5;
}

message PTReferential {
    repeated Country country_list =1;
    repeated StopArea stop_area_list = 2;
    repeated StopPoint stop_point_list = 3;
    repeated Line line_list = 4;
    repeated Route route_list = 5;
    repeated StopTime stop_time_list = 6;
    repeated VehicleJourney vehicle_journey_list = 7;
    repeated RoutePoint route_point_list = 11;
    repeated Way way_list = 12;
    repeated City city_list = 13;
    repeated Site site_list = 14;
    repeated Segment segment_list = 15;


    optional string error = 8;
    optional string warning = 9;
    optional string info = 10;
}

message FirstLetterItem {
    optional string name = 1;
    optional NavitiaType type = 2;
    optional int32 quality = 3;
    optional Way way = 4;
    optional City city = 5;
    optional StopArea stop_area = 6;
    optional Site site = 7;
    optional string uri = 8;
    optional StopPoint stop_point = 9;
}

message FirstLetter {
    repeated FirstLetterItem items = 1;
    repeated string ignored_word_list = 2;
    repeated string bad_word_list = 3;
}

message ProximityListItem {
    optional string name = 1;
    optional NavitiaType type = 2;
    optional int32 distance = 3;
    optional Way way = 4;
    optional City city = 5;
    optional StopArea stop_area = 6;
    optional Site site = 7;
    optional string uri = 8;
    optional StopPoint stop_point = 9;
}

message ProximityList {
    repeated ProximityListItem items = 1;
}


message PathItem {
    optional string name = 1;
    optional double length = 2;
}

message StreetNetwork {
    optional double length = 1;
    repeated PathItem path_item_list = 2;
    repeated GeographicalCoord coordinate_list = 3;
}

message Parcours {
    required int32 id = 1;
    message Etape {
        required string descente    = 1;
        required int32 mode	    = 2;
        repeated int32 lignes       = 3;
    }
	
    repeated Etape etapes = 2;
}

message StopTimeEtape {
    required StopTime depart  = 1;
    required StopTime arrivee = 2;
}

message Itineraire {
    required int32 parcours 	  = 1;
    repeated StopTimeEtape stop_times = 2;
}

message ReponseDemonstrateur {
    repeated Parcours Parcours_Liste = 1;
    repeated Itineraire itineraires_liste  = 2;
}

message Mode {
	required string ligne = 1;
	optional string reseau = 2;
}

message DateHeure {
	required int32 date = 1;
	required int32 heure = 2;
}

message Geocode {
	required double x = 1;
	required double y = 2;
	optional int32 type = 3;
}

message Lieu {
	required string nom = 1;
	optional Geocode geo = 2;
}

message PointEtape {
	required Lieu lieu = 1;
	required DateHeure date = 2;
}
message Etape {
	required PointEtape depart = 1;
	required PointEtape arrivee = 2;
	required Mode mode = 3;
}

message FeuilleRoute {
	repeated Etape etapes = 1;
	required int32 nbchanges = 2;
	required int32 duree = 3;
}

message Trajet {
	required int32 mode = 1;
	required string ligne = 2;
	repeated Geocode pas = 3;
}

message ItineraireDetail {
	repeated Trajet trajets = 1;
}

message Planning {
	required FeuilleRoute feuilleroute = 1;
	required ItineraireDetail itineraire = 2;
}

message Planner {
	repeated Planning planning = 1;
}

message Response{
    required API requested_api = 1;
    optional string error = 2;

    optional string info = 3;

    optional FirstLetter firstletter = 4;

    optional PTReferential ptref = 5;

    optional StreetNetwork street_network = 6;
 
    optional Planner planner = 7;	

    optional ProximityList proximitylist = 8;
}
